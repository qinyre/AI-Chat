<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI NEXUS | 多模型智能平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- DOMPurify XSS 防护 -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <!-- Highlight.js 代码语法高亮 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- 支持更多语言 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/rust.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- DM Sans Font for Body Text -->
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- External CSS -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">AI NEXUS</span>
                        <span class="logo-subtitle">多模型智能平台</span>
                    </div>
                </div>
                <div class="sidebar-buttons">
                    <button class="sidebar-btn" id="api-config-btn" title="API 密钥配置">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                    <button class="sidebar-btn" id="help-btn-sidebar" title="API Key 申请指南">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                        </svg>
                    </button>
                    <button class="sidebar-btn" id="model-manager-btn" title="模型管理">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="model-section">
                <div class="section-label">可用模型</div>
                <div class="model-list" id="model-list">
                    <!-- Models injected by JS -->
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="stats-card">
                    <div class="stats-icon">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            style="width: 20px; height: 20px;">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                        </svg>
                    </div>
                    <div class="stats-info">
                        <h4>5 个模型在线</h4>
                        <p>实时流式响应</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Area -->
        <main class="main-area">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="current-model-display">
                    <div class="model-indicator"></div>
                    <span class="current-model-name" id="current-model-name">选择模型</span>
                </div>
                <div class="top-actions">
                    <button class="action-button" id="help-btn-top">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                        </svg>
                        帮助
                    </button>
                    <button class="action-button" id="theme-btn">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                        </svg>
                        主题
                    </button>
                    <button class="action-button" id="clear-btn">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                        </svg>
                        清空
                    </button>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-area" id="chat-container">
                <!-- Welcome State (default) -->
                <div class="welcome-state">
                    <div class="welcome-icon">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z" />
                        </svg>
                    </div>
                    <h1 class="welcome-title">欢迎使用 AI NEXUS</h1>
                    <p class="welcome-subtitle">新一代多模型 AI 聚合平台，集成 Gemini、DeepSeek、Kimi、Qwen 和 Spark 五大智能引擎</p>
                    <div class="model-chips">
                        <div class="model-chip">
                            <img src="/assets/icons/gemini_logo.svg" class="chip-icon" style="width:20px;height:20px;"
                                alt="Gemini">
                            Gemini
                        </div>
                        <div class="model-chip">
                            <img src="/assets/icons/deepseek_logo.svg" class="chip-icon" style="width:20px;height:20px;"
                                alt="DeepSeek">
                            DeepSeek
                        </div>
                        <div class="model-chip">
                            <img src="/assets/icons/kimi_logo.svg" class="chip-icon" style="width:20px;height:20px;"
                                alt="Kimi">
                            Kimi
                        </div>
                        <div class="model-chip">
                            <img src="/assets/icons/qwen_logo.svg" class="chip-icon" style="width:20px;height:20px;"
                                alt="Qwen">
                            Qwen
                        </div>
                        <div class="model-chip">
                            <img src="/assets/icons/spark_logo.svg" class="chip-icon" style="width:20px;height:20px;"
                                alt="Spark">
                            Spark
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea id="user-input" class="input-field" rows="1" placeholder="输入你的问题..."></textarea>
                        <button id="send-btn" class="send-button" aria-label="发送">
                            <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                            </svg>
                        </button>
                    </div>
                    <p class="input-hint">按 Enter 发送 · Shift + Enter 换行 · AI 内容可能存在错误，请自行核实</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="help-modal">
        <div class="help-modal">
            <div class="help-header">
                <h2 class="help-title">帮助中心</h2>
                <button class="help-close" id="close-modal">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                        style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="help-body">
                <!-- Features Section -->
                <div class="modal-section">
                    <h3 class="modal-section-title">功能特点</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                                </svg>
                            </div>
                            <h4>多模型支持</h4>
                            <p>集成五大 AI 模型，一键切换</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                                </svg>
                            </div>
                            <h4>实时流式</h4>
                            <p>流式响应输出，即时查看</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                                </svg>
                            </div>
                            <h4>独立对话</h4>
                            <p>每个模型独立保存历史</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.048 4.025a3 3 0 01-4.293 0l-1.414-1.414a3 3 0 010-4.293l1.414-1.414a3 3 0 014.293 0l1.414 1.414a3 3 0 010 4.293l-1.414 1.414zm5.656-9.194a3 3 0 004.293 0l1.414 1.414a3 3 0 010 4.293l-1.414 1.414a3 3 0 01-4.293 0l-1.414-1.414a3 3 0 010-4.293z" />
                                </svg>
                            </div>
                            <h4>主题切换</h4>
                            <p>支持深色/浅色双主题</p>
                        </div>
                    </div>
                </div>

                <!-- FAQ Section -->
                <div class="modal-section">
                    <h3 class="modal-section-title">常见问题</h3>
                    <div class="faq-list">
                        <div class="faq-item">
                            <div class="faq-question">
                                <span>如何切换 AI 模型？</span>
                                <div class="faq-icon">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </div>
                            </div>
                            <div class="faq-answer">
                                <div class="faq-answer-inner">在左侧侧边栏的模型列表中点击任意模型即可切换。每个模型都有独立的对话历史记录。</div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <span>如何清空当前对话？</span>
                                <div class="faq-icon">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </div>
                            </div>
                            <div class="faq-answer">
                                <div class="faq-answer-inner">点击顶部栏的「清空」按钮即可清除当前选中模型的所有对话记录。此操作不可撤销。</div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <span>支持 Markdown 格式吗？</span>
                                <div class="faq-icon">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </div>
                            </div>
                            <div class="faq-answer">
                                <div class="faq-answer-inner">是的！AI 回复会自动渲染 Markdown 格式，包括代码块、列表、链接、加粗等。</div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <span>如何发送多行消息？</span>
                                <div class="faq-icon">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </div>
                            </div>
                            <div class="faq-answer">
                                <div class="faq-answer-inner">使用 <span class="kbd">Shift</span> + <span
                                        class="kbd">Enter</span> 换行，单独按 <span class="kbd">Enter</span> 发送消息。</div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <span>为什么 Spark 模型没有上下文记忆？</span>
                                <div class="faq-icon">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </div>
                            </div>
                            <div class="faq-answer">
                                <div class="faq-answer-inner">Spark API 的限制导致它不支持对话历史功能。每次对话都视为独立的新消息，不会发送之前的上下文。</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Key 申请指南 Section -->
                <div class="modal-section">
                    <h3 class="modal-section-title" style="display: flex; align-items: center; gap: 10px;">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            style="width: 24px; height: 24px; color: var(--accent-blue);">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" />
                        </svg>
                        API Key 申请指南
                    </h3>

                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-top: 20px;">
                        <!-- Google Gemini -->
                        <div
                            style="background: var(--bg-tertiary); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #4285f4, #34a853, #fbbc05, #ea4335); display: flex; align-items: center; justify-content: center;">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px; color: #fff;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 2v6m0 0v6m0-6h6m-6 0H6" />
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Google Gemini</div>
                                    <div
                                        style="font-size: 11px; color: var(--accent-cyan); background: rgba(0, 255, 170, 0.15); padding: 2px 8px; border-radius: 8px; display: inline-block;">
                                        免费</div>
                                </div>
                            </div>
                            <ol
                                style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 13px; line-height: 1.7;">
                                <li>访问 <a href="https://makersuite.google.com/app/apikey" target="_blank"
                                        style="color: var(--accent-blue);">申请页面</a></li>
                                <li>Google 账号登录</li>
                                <li>点击 "Create API key"</li>
                                <li>复制密钥（AIzaSy...）</li>
                            </ol>
                        </div>

                        <!-- DeepSeek -->
                        <div
                            style="background: var(--bg-tertiary); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #4d6bfe, #6366f1); display: flex; align-items: center; justify-content: center;">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px; color: #fff;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">DeepSeek</div>
                                    <div
                                        style="font-size: 11px; color: var(--accent-yellow); background: rgba(255, 170, 0, 0.15); padding: 2px 8px; border-radius: 8px; display: inline-block;">
                                        超低价</div>
                                </div>
                            </div>
                            <ol
                                style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 13px; line-height: 1.7;">
                                <li>访问 <a href="https://platform.deepseek.com" target="_blank"
                                        style="color: var(--accent-blue);">注册</a></li>
                                <li><a href="https://platform.deepseek.com/api_keys" target="_blank"
                                        style="color: var(--accent-blue);">创建 API Key</a></li>
                                <li>立即复制（仅显示一次）</li>
                                <li>可选：充值 ¥10 测试</li>
                            </ol>
                        </div>

                        <!-- Moonshot / Kimi -->
                        <div
                            style="background: var(--bg-tertiary); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #f97316, #fb923c); display: flex; align-items: center; justify-content: center;">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px; color: #fff;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Moonshot / Kimi</div>
                                    <div
                                        style="font-size: 11px; color: var(--accent-yellow); background: rgba(255, 170, 0, 0.15); padding: 2px 8px; border-radius: 8px; display: inline-block;">
                                        128K长文本</div>
                                </div>
                            </div>
                            <ol
                                style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 13px; line-height: 1.7;">
                                <li>访问 <a href="https://platform.moonshot.cn" target="_blank"
                                        style="color: var(--accent-blue);">注册</a></li>
                                <li>头像 → API Keys</li>
                                <li>立即复制（仅显示一次）</li>
                                <li>新用户赠送 ¥15</li>
                            </ol>
                        </div>

                        <!-- Qwen -->
                        <div
                            style="background: var(--bg-tertiary); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #8b5cf6, #a78bfa); display: flex; align-items: center; justify-content: center;">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px; color: #fff;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Qwen (通义千问)</div>
                                    <div
                                        style="font-size: 11px; color: var(--accent-cyan); background: rgba(0, 255, 170, 0.15); padding: 2px 8px; border-radius: 8px; display: inline-block;">
                                        免费额度</div>
                                </div>
                            </div>
                            <ol
                                style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 13px; line-height: 1.7;">
                                <li>访问 <a href="https://siliconflow.cn" target="_blank"
                                        style="color: var(--accent-blue);">注册</a></li>
                                <li>头像 → API 密钥</li>
                                <li>创建并复制密钥</li>
                                <li>新用户有免费额度</li>
                            </ol>
                        </div>

                        <!-- Spark -->
                        <div
                            style="background: var(--bg-tertiary); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #0891b2, #06b6d4); display: flex; align-items: center; justify-content: center;">
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                        style="width: 16px; height: 16px; color: #fff;">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Spark (讯飞星火)</div>
                                    <div
                                        style="font-size: 11px; color: var(--accent-magenta); background: rgba(255, 0, 170, 0.15); padding: 2px 8px; border-radius: 8px; display: inline-block;">
                                        需认证</div>
                                </div>
                            </div>
                            <ol
                                style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 13px; line-height: 1.7;">
                                <li>访问 <a href="https://www.xfyun.cn" target="_blank"
                                        style="color: var(--accent-blue);">注册</a></li>
                                <li>完成实名认证</li>
                                <li>控制台创建应用</li>
                                <li>查看 API Key</li>
                            </ol>
                        </div>
                    </div>

                    <div
                        style="margin-top: 20px; padding: 16px; background: rgba(255, 0, 170, 0.1); border: 1px solid rgba(255, 0, 170, 0.3); border-radius: 10px;">
                        <div style="display: flex; align-items: start; gap: 10px; margin-bottom: 8px;">
                            <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                style="width: 20px; height: 20px; color: var(--accent-magenta); flex-shrink: 0;">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                            </svg>
                            <div style="font-weight: 600; color: var(--text-primary);">安全提示</div>
                        </div>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 13px; line-height: 1.6;">
                            API Key 存储在本地 api_keys.json 文件中，不会被提交到 Git。请妥善保管您的密钥，不要分享给他人。
                        </p>
                    </div>

                    <p style="margin-top: 16px; text-align: center; color: var(--text-secondary); font-size: 13px;">
                        详细文档：<a href="https://github.com/qinyre/AI-Chat/blob/main/docs/API_KEY_GUIDE.md" target="_blank"
                            style="color: var(--accent-blue);">API Key 申请指南（完整版）</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- API 配置模态框 -->
    <div class="api-config-overlay" id="api-config-modal">
        <div class="api-config-modal">
            <div class="api-config-header">
                <h2 class="api-config-title">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    API 密钥配置
                </h2>
                <button class="modal-close" id="close-api-config">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                        style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="api-config-body" id="api-config-list">
                <!-- API 配置项由 JS 动态生成 -->
            </div>
            <div class="api-config-footer">
                <button class="api-config-btn secondary" id="cancel-api-config">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    取消
                </button>
                <button class="api-config-btn primary" id="save-api-config">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    保存配置
                </button>
            </div>
        </div>
    </div>

    <!-- External JavaScript Modules (load order matters) -->
    <script src="/static/js/state.js"></script>
    <script src="/static/js/icons.js"></script>
    <script src="/static/js/theme.js"></script>
    <script src="/static/js/models.js"></script>
    <script src="/static/js/chat.js"></script>
    <script src="/static/js/api-config.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/app.js"></script>
</body>

</html>