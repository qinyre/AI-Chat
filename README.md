# AI NEXUS

<div align="center">

**å¤šæ¨¡å‹ AI èšåˆèŠå¤©å¹³å°**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-3.0+-green.svg)](https://flask.palletsprojects.com/)
[![Tests](https://img.shields.io/badge/Tests-61%20passing-brightgreen.svg)](web_chat/tests/)
[![Coverage](https://img.shields.io/badge/Coverage-90.89%25-brightgreen.svg)](web_chat/tests/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

ä¸€ä¸ªç»Ÿä¸€çš„ Web ç•Œé¢ï¼Œé›†æˆå¤šä¸ªå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›å•†ï¼Œæ”¯æŒå®æ—¶æµå¼èŠå¤©åŠŸèƒ½ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [é…ç½®](#é…ç½®) â€¢ [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ) â€¢ [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æ¼”ç¤ºæˆªå›¾](#æ¼”ç¤ºæˆªå›¾)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é…ç½®](#é…ç½®)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## é¡¹ç›®ç®€ä»‹

**AI NEXUS** æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å¤šæ¨¡å‹ AI èšåˆèŠå¤©å¹³å°ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ç»Ÿä¸€çš„ Web ç•Œé¢ï¼Œæ— ç¼é›†æˆå¤šä¸ªå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›å•†ã€‚é€šè¿‡å®æ—¶æµå¼å“åº”å’Œæ¨¡å‹ç‰¹å®šçš„å¯¹è¯å†å²ç®¡ç†ï¼Œç”¨æˆ·å¯ä»¥åœ¨å•ä¸€ç•Œé¢ä¸­ä½“éªŒä¸åŒ AI å¼•æ“çš„ç‹¬ç‰¹èƒ½åŠ›ã€‚

### æ ¸å¿ƒä»·å€¼

- ğŸ”„ **å¤šå¼•æ“èšåˆ** - ä¸€ç«™å¼ä½“éªŒ 5+ å¤§ä¸»æµ AI æ¨¡å‹
- â• **è‡ªå®šä¹‰æ¨¡å‹** - æ”¯æŒé€šè¿‡å‰ç«¯ç•Œé¢æ·»åŠ è‡ªå®šä¹‰ LLM æ¨¡å‹
- âš¡ **å®æ—¶æµå¼** - åŸºäº SSE çš„æµå¼å“åº”ï¼Œå³æ—¶æ‰“å­—æœºä½“éªŒ
- ğŸ›‘ **ä¸­æ–­è¾“å‡º** - AI ç”Ÿæˆæ—¶å¯éšæ—¶ä¸­æ–­ï¼Œä¿å­˜éƒ¨åˆ†å“åº”
- ğŸ’¬ **ç‹¬ç«‹å¯¹è¯** - æ¯ä¸ªæ¨¡å‹ç»´æŠ¤ç‹¬ç«‹çš„å¯¹è¯å†å²
- ğŸ¨ **ç°ä»£ç•Œé¢** - ç»ç’ƒæ‹Ÿæ€è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- ğŸ”’ **å®‰å…¨é…ç½®** - å‰ç«¯æœ¬åœ°é…ç½®ï¼Œå¯†é’¥æ–‡ä»¶ä¸æäº¤ç‰ˆæœ¬æ§åˆ¶

---

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| **å¤šæ¨¡å‹æ”¯æŒ** | é›†æˆ Google Geminiã€DeepSeekã€Moonshot/Kimiã€Qwenã€Spark äº”å¤§ AI æ¨¡å‹ |
| **è‡ªå®šä¹‰æ¨¡å‹** | æ”¯æŒé€šè¿‡å‰ç«¯ç•Œé¢æ·»åŠ è‡ªå®šä¹‰ LLM æ¨¡å‹ |
| **å®æ—¶æµå¼å“åº”** | åŸºäº Server-Sent Events (SSE) çš„æµå¼ä¼ è¾“ï¼Œæä¾›å³æ—¶åé¦ˆ |
| **ä¸­æ–­ AI è¾“å‡º** | AI ç”Ÿæˆæ—¶å‘é€æŒ‰é’®å˜ä¸ºä¸­æ–­æŒ‰é’®ï¼Œå¯éšæ—¶åœæ­¢ç”Ÿæˆå¹¶ä¿å­˜éƒ¨åˆ†å“åº” |
| **ç‹¬ç«‹å¯¹è¯å†å²** | æ¯ä¸ªæ¨¡å‹ç»´æŠ¤ç‹¬ç«‹çš„å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ |
| **å¯¹è¯å†å²æŒä¹…åŒ–** | è‡ªåŠ¨ä¿å­˜å¯¹è¯åˆ° LocalStorageï¼Œåˆ·æ–°é¡µé¢ä¸ä¸¢å¤± |
| **æ™ºèƒ½é”™è¯¯å¤„ç†** | åˆ†ç±»é”™è¯¯æç¤ºï¼ˆç½‘ç»œã€APIå¯†é’¥ã€é€Ÿç‡é™åˆ¶ç­‰ï¼‰ï¼Œæä¾›è§£å†³å»ºè®® |
| **æ“ä½œç¡®è®¤** | æ¸…ç©ºå¯¹è¯ã€åˆ é™¤æ¨¡å‹ç­‰ç ´åæ€§æ“ä½œéœ€è¦ç”¨æˆ·ç¡®è®¤ |
| **Markdown æ¸²æŸ“** | æ”¯æŒ Markdown æ ¼å¼çš„å“åº”å†…å®¹ï¼ŒåŒ…å«ä»£ç é«˜äº® |
| **ä¸»é¢˜åˆ‡æ¢** | æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªç”±åˆ‡æ¢ |
| **å“åº”å¼è®¾è®¡** | é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¾å¤‡ |
| **æ€§èƒ½ä¼˜åŒ–** | æµå¼æ¸²æŸ“æ€§èƒ½æå‡ 50%+ï¼Œæ”¯æŒé•¿æ–‡æœ¬å¿«é€Ÿå“åº” |

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§

- âœ… **ç»Ÿä¸€æŠ½è±¡å±‚** - é€šè¿‡ `LLMWrapper` ç±»ç»Ÿä¸€ä¸åŒ LLM æä¾›å•†çš„ API
- âœ… **æœ¬åœ°é…ç½®å­˜å‚¨** - API å¯†é’¥æœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼Œå‰ç«¯å¯è§†åŒ–é…ç½®
- âœ… **å¯¹è¯å†å²æŒä¹…åŒ–** - LocalStorage è‡ªåŠ¨ä¿å­˜/åŠ è½½ï¼Œé¡µé¢åˆ·æ–°ä¸ä¸¢å¤±
- âœ… **åŠ¨æ€æ¨¡å‹ç®¡ç†** - é€šè¿‡å‰ç«¯ç•Œé¢æ·»åŠ /åˆ é™¤è‡ªå®šä¹‰æ¨¡å‹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- âœ… **æ¨¡å—åŒ–å‰ç«¯** - JavaScript æ¨¡å—åŒ–æ¶æ„ï¼ŒèŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- âœ… **è¯·æ±‚ä¸­æ–­** - åŸºäº AbortController çš„è¯·æ±‚å–æ¶ˆæœºåˆ¶
- âœ… **RESTful API** - æ ‡å‡†çš„ HTTP æ¥å£è®¾è®¡
- âœ… **æµå¼ä¼ è¾“** - Python ç”Ÿæˆå™¨ + Flask æµå¼å“åº”
- âœ… **æ— æ¡†æ¶å‰ç«¯** - åŸç”Ÿ JavaScriptï¼Œæ— é¢å¤–ä¾èµ–
- âœ… **æ€§èƒ½ä¼˜åŒ–** - èŠ‚æµ + requestAnimationFrame ä¼˜åŒ–æµå¼æ¸²æŸ“
- âœ… **é”™è¯¯åˆ†ç±»** - æ™ºèƒ½é”™è¯¯åˆ†æå’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- âœ… **æ“ä½œç¡®è®¤** - ç ´åæ€§æ“ä½œå‰éœ€è¦ç”¨æˆ·ç¡®è®¤

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **CSRF ä¿æŠ¤** - Flask-WTF é˜²æŠ¤è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»
- âœ… **XSS é˜²æŠ¤** - DOMPurify æ¸…ç†æ‰€æœ‰ç”¨æˆ·è¾“å…¥çš„ HTML å†…å®¹
- âœ… **è¾“å…¥éªŒè¯** - å®Œæ•´çš„è¯·æ±‚å‚æ•°éªŒè¯ï¼ˆç±»å‹ã€é•¿åº¦ã€æ ¼å¼ï¼‰
- âœ… **ç±»å‹æ³¨è§£** - å®Œæ•´çš„ç±»å‹æç¤ºï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- âœ… **å¼‚å¸¸å¤„ç†** - å…·ä½“çš„å¼‚å¸¸æ•è·ï¼Œé¿å…è£¸ except å­å¥
- âœ… **æ—¥å¿—è®°å½•** - ç»“æ„åŒ–æ—¥å¿—è®°å½•ï¼Œä¾¿äºå®¡è®¡å’Œè°ƒè¯•
- âœ… **ç¯å¢ƒå˜é‡** - æ•æ„Ÿé…ç½®é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- âœ… **æµ‹è¯•è¦†ç›–** - 61 ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œ90.89% è¦†ç›–ç‡
- âœ… **é”™è¯¯é‡è¯•** - ç½‘ç»œæ•…éšœè‡ªåŠ¨é‡è¯•ï¼ŒæŒ‡æ•°é€€é¿ç­–ç•¥
- âœ… **é€Ÿç‡é™åˆ¶** - API é€Ÿç‡é™åˆ¶ï¼Œé˜²æ­¢æ»¥ç”¨å’Œè¿‡è½½

---

## æ¼”ç¤ºæˆªå›¾

> ğŸ¨ ç•Œé¢é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI NEXUS                              [ğŸŒ™] [â˜€ï¸]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  æ¨¡å‹é€‰æ‹©ï¼š                                                   â”‚
â”‚  [ğŸŸ¢ Gemini] [ğŸ”µ DeepSeek] [ğŸŸ  Kimi] [ğŸŸ£ Qwen] [âš¡ Spark]  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¯¹è¯å†å²                                                 â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ ç”¨æˆ·: ä»‹ç»ä¸€ä¸‹ Python                                  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ ğŸ¤– Gemini: Python æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€...                   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è¾“å…¥æ¶ˆæ¯...                              [å‘é€]         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸­æ–­ AI è¾“å‡ºåŠŸèƒ½**ï¼š
- AI ç”Ÿæˆæ—¶ï¼Œå‘é€æŒ‰é’®è‡ªåŠ¨å˜ä¸ºä¸­æ–­æŒ‰é’®ï¼ˆâ¬›ï¼‰
- ç‚¹å‡»ä¸­æ–­æŒ‰é’®å¯éšæ—¶åœæ­¢ AI ç”Ÿæˆ
- å·²ç”Ÿæˆçš„éƒ¨åˆ†å†…å®¹ä¼šè‡ªåŠ¨ä¿å­˜å¹¶æ˜¾ç¤º `[å·²ä¸­æ–­]` æ ‡è®°

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windowsã€macOS æˆ– Linux
- **ç½‘ç»œ**: éœ€è¦è®¿é—® LLM æä¾›å•†çš„ API

### å®‰è£…æ­¥éª¤

#### 1ï¸âƒ£ å…‹éš†ä»“åº“

```bash
git clone https://github.com/qinyre/AI-Chat.git
cd AI-Chat
```

#### 2ï¸âƒ£ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# macOS / Linux
python3 -m venv venv
source venv/bin/activate
```

#### 3ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### 4ï¸âƒ£ å¯åŠ¨åº”ç”¨

```bash
python web_chat/app.py
```

#### 5ï¸âƒ£ è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š[http://127.0.0.1:5000](http://127.0.0.1:5000)

---

## é…ç½®

### API å¯†é’¥è·å–

| æä¾›å•† | è·å–åœ°å€ | è¯´æ˜ |
|--------|---------|------|
| **Google Gemini** | [makersuite.google.com](https://makersuite.google.com/app/apikey) | å…è´¹ API å¯†é’¥ |
| **DeepSeek** | [platform.deepseek.com](https://platform.deepseek.com/api_keys) | éœ€æ³¨å†Œè´¦å· |
| **Moonshot / Kimi** | [platform.moonshot.cn](https://platform.moonshot.cn/console/api-keys) | éœ€æ³¨å†Œè´¦å· |
| **Qwen (é€šä¹‰åƒé—®)** | [siliconflow.cn](https://siliconflow.cn/account/ak) | éœ€æ³¨å†Œè´¦å· |
| **Spark (è®¯é£æ˜Ÿç«)** | [xfyun.cn](https://console.xfyun.cn/services/cbm) | éœ€æ³¨å†Œè´¦å· |

> ğŸ“– **è¯¦ç»†ç”³è¯·æ­¥éª¤**ï¼šæŸ¥çœ‹ [API Key ç”³è¯·æŒ‡å—](docs/API_KEY_GUIDE.md) äº†è§£æ¯ä¸ªå¹³å°çš„å…·ä½“ç”³è¯·æµç¨‹ã€è´¹ç”¨è¯´æ˜å’Œå¸¸è§é—®é¢˜ã€‚

### å‰ç«¯é…ç½®è¯´æ˜

åº”ç”¨å¯åŠ¨åï¼Œé€šè¿‡å‰ç«¯ç•Œé¢é…ç½® API å¯†é’¥ï¼š

1. **æ‰“å¼€é…ç½®ç•Œé¢**
   - ç‚¹å‡»å·¦ä¾§è¾¹æ çš„è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰

2. **è¾“å…¥ API å¯†é’¥**
   - åœ¨é…ç½®ç•Œé¢ä¸­å¡«å…¥å„æ¨¡å‹çš„ API å¯†é’¥
   - ç‚¹å‡»çœ¼ç›å›¾æ ‡å¯æ˜¾ç¤º/éšè—å¯†é’¥

3. **ä¿å­˜é…ç½®**
   - ç‚¹å‡»"ä¿å­˜é…ç½®"æŒ‰é’®
   - å¯†é’¥å°†ä¿å­˜åˆ°æœ¬åœ° `web_chat/api_keys.json` æ–‡ä»¶

4. **é…ç½®æŒä¹…åŒ–**
   - ä¸‹æ¬¡å¯åŠ¨åº”ç”¨æ—¶ï¼Œé…ç½®ä¼šè‡ªåŠ¨åŠ è½½
   - æ— éœ€é‡å¤è¾“å…¥ API å¯†é’¥

> **æ³¨æ„**: `api_keys.json` æ–‡ä»¶å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

---

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

1. **é€‰æ‹©æ¨¡å‹** - ç‚¹å‡»é¡¶éƒ¨æ¨¡å‹å›¾æ ‡åˆ‡æ¢ä¸åŒçš„ AI æ¨¡å‹
2. **è¾“å…¥æ¶ˆæ¯** - åœ¨åº•éƒ¨è¾“å…¥æ¡†è¾“å…¥æ‚¨çš„é—®é¢˜
3. **å‘é€è¯·æ±‚** - ç‚¹å‡»"å‘é€"æŒ‰é’®æˆ–æŒ‰ Enter é”®
4. **æŸ¥çœ‹å“åº”** - AI çš„å›å¤ä¼šä»¥æµå¼æ–¹å¼é€å­—æ˜¾ç¤º
5. **ä¸­æ–­è¾“å‡º** - AI ç”Ÿæˆæ—¶ï¼Œå‘é€æŒ‰é’®å˜ä¸ºä¸­æ–­æŒ‰é’®ï¼ˆâ¬›ï¼‰ï¼Œç‚¹å‡»å¯éšæ—¶åœæ­¢

### é«˜çº§åŠŸèƒ½

#### ğŸ›ï¸ æ¨¡å‹ç®¡ç†

é€šè¿‡å‰ç«¯ç•Œé¢æ·»åŠ è‡ªå®šä¹‰ LLM æ¨¡å‹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

1. **æ‰“å¼€æ¨¡å‹ç®¡ç†**
   - ç‚¹å‡»å·¦ä¾§è¾¹æ çš„æ¨¡å‹ç®¡ç†å›¾æ ‡ï¼ˆğŸ“‹ï¼‰
   - åœ¨æ–°æ‰“å¼€çš„ç®¡ç†é¡µé¢ä¸­è¿›è¡Œæ“ä½œ

2. **æ·»åŠ æ–°æ¨¡å‹**
   - ç‚¹å‡»"æ·»åŠ æ–°æ¨¡å‹"æŒ‰é’®
   - å¡«å†™æ¨¡å‹ä¿¡æ¯ï¼š
     - **æ¨¡å‹ ID**: å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ `my-custom-model`ï¼‰
     - **æ¨¡å‹åç§°**: æ˜¾ç¤ºåç§°
     - **API ç±»å‹**: é€‰æ‹©æ”¯æŒçš„åè®®ç±»å‹
     - **æ¨¡å‹æ ‡è¯†**: API ä½¿ç”¨çš„æ¨¡å‹åç§°
     - **API å¯†é’¥å˜é‡å**: ç¯å¢ƒå˜é‡åï¼ˆå¦‚ `CUSTOM_API_KEY`ï¼‰
   - æ ¹æ®é€‰æ‹©çš„ API ç±»å‹å¡«å†™å¯é€‰å­—æ®µ
   - é€‰æ‹©æ¨¡å‹å›¾æ ‡æˆ–ä¸Šä¼ è‡ªå®šä¹‰å›¾æ ‡
   - ç‚¹å‡»"ä¿å­˜æ¨¡å‹"

3. **ç®¡ç†å·²æœ‰æ¨¡å‹**
   - ç¼–è¾‘æ¨¡å‹é…ç½®
   - åˆ é™¤ä¸éœ€è¦çš„è‡ªå®šä¹‰æ¨¡å‹ï¼ˆå†…ç½®æ¨¡å‹ä¸å¯åˆ é™¤ï¼‰

> **æ³¨æ„**:
> - å†…ç½®æ¨¡å‹ï¼ˆGoogle Geminiã€DeepSeekã€Moonshotã€Qwenã€Sparkï¼‰æ— æ³•åˆ é™¤
> - æ·»åŠ çš„è‡ªå®šä¹‰æ¨¡å‹ä¿å­˜åœ¨æœ¬åœ° `models.json`ï¼Œä¸ä¼šè¢«æäº¤åˆ° Git
> - æ¯æ¬¡æ·»åŠ æ¨¡å‹åï¼Œéœ€è¦å…ˆåœ¨ API å¯†é’¥é…ç½®ä¸­æ·»åŠ å¯¹åº”çš„å¯†é’¥

#### åˆ‡æ¢ä¸»é¢˜

ç‚¹å‡»å³ä¸Šè§’çš„ä¸»é¢˜å›¾æ ‡åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼ï¼š
- ğŸŒ™ æ·±è‰²æ¨¡å¼
- â˜€ï¸ æµ…è‰²æ¨¡å¼

#### å¤šè½®å¯¹è¯

æ¯ä¸ªæ¨¡å‹ç»´æŠ¤ç‹¬ç«‹çš„å¯¹è¯å†å²ï¼Œæ”¯æŒä¸Šä¸‹æ–‡ç†è§£ï¼š

```
ç”¨æˆ·: ä»€ä¹ˆæ˜¯ Pythonï¼Ÿ
AI: Python æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€...
ç”¨æˆ·: å®ƒæœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ
AI: Python çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬...ï¼ˆåŸºäºä¸Šä¸€è½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ï¼‰
```

> **æ³¨æ„**: Spark æ¨¡å‹ä¸æ”¯æŒå¯¹è¯å†å²ï¼Œæ¯æ¬¡ä»…å“åº”å½“å‰æ¶ˆæ¯ã€‚

---

## æŠ€æœ¯æ ˆ

### åç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Python** | 3.11+ | ä¸»è¦ç¼–ç¨‹è¯­è¨€ |
| **Flask** | 3.0+ | Web æ¡†æ¶ |
| **Flask-WTF** | 1.2+ | CSRF ä¿æŠ¤ |
| **requests** | 2.31+ | HTTP è¯·æ±‚åº“ |
| **OpenAI SDK** | 1.0+ | DeepSeekã€Moonshot é›†æˆ |
| **Google GenAI** | 0.3+ | Gemini é›†æˆ |
| **python-dotenv** | 1.0+ | ç¯å¢ƒå˜é‡ç®¡ç† |
| **pytest** | 7.4+ | æµ‹è¯•æ¡†æ¶ |
| **python-json-logger** | 2.0+ | JSON æ—¥å¿—æ ¼å¼åŒ– |

### å‰ç«¯

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **åŸç”Ÿ JavaScript (ES6+)** | æ¨¡å—åŒ–äº¤äº’é€»è¾‘ |
| **Marked.js** | Markdown æ¸²æŸ“ |
| **DOMPurify** | XSS é˜²æŠ¤ï¼ŒHTML æ¸…ç† |
| **Highlight.js** | ä»£ç è¯­æ³•é«˜äº® |
| **TailwindCSS** | æ ·å¼æ¡†æ¶ï¼ˆCDNï¼‰ |

**å‰ç«¯æ¨¡å—æ¶æ„**ï¼š
```
static/js/
â”œâ”€â”€ app.js           # åº”ç”¨å…¥å£ï¼Œåˆå§‹åŒ–æ‰€æœ‰æ¨¡å—
â”œâ”€â”€ state.js         # å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆæ¨¡å‹ã€å†å²ã€å‘é€çŠ¶æ€ï¼‰
â”œâ”€â”€ icons.js         # æ¨¡å‹å›¾æ ‡ç®¡ç†ï¼ˆå†…ç½®å›¾æ ‡ + ä¸Šä¼ å›¾æ ‡ï¼‰
â”œâ”€â”€ theme.js         # ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰
â”œâ”€â”€ models.js        # æ¨¡å‹åˆ—è¡¨æ¸²æŸ“ä¸åˆ‡æ¢
â”œâ”€â”€ chat.js          # èŠå¤©åŠŸèƒ½ï¼ˆå‘é€ã€æµå¼ã€ä¸­æ–­ï¼‰
â”œâ”€â”€ api-config.js    # API å¯†é’¥é…ç½®ç®¡ç†
â””â”€â”€ ui.js            # UI äº¤äº’ï¼ˆä¾§è¾¹æ ã€æ¬¢è¿é¡µã€é€šçŸ¥ï¼‰
```

### LLM æä¾›å•†

| æä¾›å•† | æ¨¡å‹ | SDK/åè®® |
|--------|------|----------|
| Google | Gemini 2.5 Flash | google-genai SDK |
| DeepSeek | deepseek-chat | OpenAI SDK |
| Moonshot | Kimi k2-turbo-preview | OpenAI SDK |
| Qwen | Qwen2.5-VL-72B | HTTP + SSE |
| Spark | Spark x1 | HTTP + SSE |

---

## é¡¹ç›®ç»“æ„

```
AI-Chat/
â”œâ”€â”€ .claude/                    # AI é…ç½®ä¸ç´¢å¼•
â”œâ”€â”€ .github/                    # GitHub Actions CI/CD
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ tests.yml           # è‡ªåŠ¨åŒ–æµ‹è¯•å·¥ä½œæµ
â”œâ”€â”€ web_chat/                   # Web åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ app.py                  # Flask åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ llm_wrapper.py          # LLM æŠ½è±¡å±‚æ ¸å¿ƒ
â”‚   â”œâ”€â”€ model_manager.py        # æ¨¡å‹ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ models.json.example     # æ¨¡å‹é…ç½®æ¨¡æ¿ï¼ˆGit è¿½è¸ªï¼‰
â”‚   â”œâ”€â”€ models.json             # ç”¨æˆ·æ¨¡å‹é…ç½®ï¼ˆæœ¬åœ°ï¼Œä¸è¿½è¸ªï¼‰
â”‚   â”œâ”€â”€ tests/                  # æµ‹è¯•ç›®å½•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ conftest.py         # pytest é…ç½®å’Œ fixtures
â”‚   â”‚   â”œâ”€â”€ test_app.py         # Flask API é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_llm_wrapper.py # LLMWrapper å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ index.html          # å‰ç«¯ä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ model_manager.html  # æ¨¡å‹ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ main.css        # æ ·å¼æ–‡ä»¶ï¼ˆç»ç’ƒæ‹Ÿæ€è®¾è®¡ï¼‰
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â”œâ”€â”€ app.js          # åº”ç”¨å…¥å£
â”‚   â”‚       â”œâ”€â”€ state.js        # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ icons.js        # å›¾æ ‡ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ theme.js        # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚       â”œâ”€â”€ models.js       # æ¨¡å‹åˆ—è¡¨
â”‚   â”‚       â”œâ”€â”€ chat.js         # èŠå¤©åŠŸèƒ½
â”‚   â”‚       â”œâ”€â”€ api-config.js   # API é…ç½®
â”‚   â”‚       â””â”€â”€ ui.js           # UI äº¤äº’
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚    â””â”€â”€ icons/             # æ¨¡å‹å›¾æ ‡èµ„æº
â”‚   â”‚        â”œâ”€â”€ gemini_logo.svg
â”‚   â”‚        â”œâ”€â”€ deepseek_logo.svg
â”‚   â”‚        â”œâ”€â”€ kimi_logo.svg
â”‚   â”‚        â”œâ”€â”€ qwen_logo.svg
â”‚   â”‚        â”œâ”€â”€ spark_logo.svg
â”‚   â”‚        â””â”€â”€ zhipu_logo.svg
â”‚   â””â”€â”€ api_keys.json           # API å¯†é’¥æœ¬åœ°å­˜å‚¨ï¼ˆä¸è¿½è¸ªï¼‰
â”‚
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API_KEY_GUIDE.md        # API Key ç”³è¯·æŒ‡å—
â”‚   â”œâ”€â”€ IMPLEMENTATION_PLAN.md  # å®æ–½è®¡åˆ’
â”‚   â””â”€â”€ ROADMAP.md              # å¼€å‘è·¯çº¿å›¾
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ pytest.ini                  # pytest é…ç½®
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â””â”€â”€ README.md                   # æœ¬æ–‡æ¡£
```

> **è¯´æ˜**ï¼š
> - `models.json.example` - å†…ç½®æ¨¡å‹é…ç½®æ¨¡æ¿ï¼Œé¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨å¤åˆ¶ä¸º `models.json`
> - `models.json` - ç”¨æˆ·æ¨¡å‹é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«å†…ç½®æ¨¡å‹å’Œè‡ªå®šä¹‰æ¨¡å‹ï¼Œå·²åŠ å…¥ `.gitignore`
> - `api_keys.json` - API å¯†é’¥æœ¬åœ°å­˜å‚¨æ–‡ä»¶ï¼Œå·²åŠ å…¥ `.gitignore`

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### åç«¯
- **`app.py`** - Flask åº”ç”¨å…¥å£ï¼Œå®šä¹‰è·¯ç”±å’Œå¯åŠ¨é…ç½®
- **`llm_wrapper.py`** - LLM æŠ½è±¡å±‚ï¼Œç»Ÿä¸€ä¸åŒæä¾›å•†çš„ APIï¼Œæ”¯æŒåŠ¨æ€æ¨¡å‹åŠ è½½
- **`model_manager.py`** - æ¨¡å‹ç®¡ç†æ¨¡å—ï¼Œæä¾›æ¨¡å‹çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½

#### å‰ç«¯æ¨¡æ¿
- **`templates/index.html`** - å‰ç«¯ä¸»é¡µé¢ï¼ŒèŠå¤©ç•Œé¢å’Œ API å¯†é’¥é…ç½®
- **`templates/model_manager.html`** - æ¨¡å‹ç®¡ç†é¡µé¢ï¼Œæ·»åŠ /ç¼–è¾‘/åˆ é™¤è‡ªå®šä¹‰æ¨¡å‹

#### å‰ç«¯ JavaScript æ¨¡å—
- **`static/js/app.js`** - åº”ç”¨å…¥å£ï¼Œåˆå§‹åŒ–æ‰€æœ‰æ¨¡å—å¹¶ç»‘å®šäº‹ä»¶
- **`static/js/state.js`** - å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆå½“å‰æ¨¡å‹ã€å¯¹è¯å†å²ã€å‘é€çŠ¶æ€ã€ä¸­æ–­æ§åˆ¶å™¨ï¼‰
- **`static/js/icons.js`** - æ¨¡å‹å›¾æ ‡ç®¡ç†ï¼Œæ”¯æŒå†…ç½®å›¾æ ‡å’Œè‡ªå®šä¹‰ä¸Šä¼ å›¾æ ‡
- **`static/js/theme.js`** - ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼ˆæ·±è‰²/æµ…è‰²æ¨¡å¼ï¼‰
- **`static/js/models.js`** - æ¨¡å‹åˆ—è¡¨æ¸²æŸ“å’Œæ¨¡å‹åˆ‡æ¢é€»è¾‘
- **`static/js/chat.js`** - èŠå¤©æ ¸å¿ƒåŠŸèƒ½ï¼ˆå‘é€æ¶ˆæ¯ã€æµå¼å“åº”ã€ä¸­æ–­è¾“å‡ºï¼‰
- **`static/js/api-config.js`** - API å¯†é’¥é…ç½®ç®¡ç†ï¼ˆæ˜¾ç¤º/éšè—ã€ä¿å­˜ï¼‰
- **`static/js/ui.js`** - UI äº¤äº’ï¼ˆä¾§è¾¹æ ã€æ¬¢è¿é¡µã€æ¸…ç©ºå†å²ã€é€šçŸ¥ï¼‰

#### æ ·å¼
- **`static/css/main.css`** - å…¨å±€æ ·å¼ï¼Œç»ç’ƒæ‹Ÿæ€è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜

---

## å¼€å‘æŒ‡å—

### æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹

**æ¨èæ–¹å¼ï¼šä½¿ç”¨å‰ç«¯ç•Œé¢**

é€šè¿‡å‰ç«¯æ¨¡å‹ç®¡ç†ç•Œé¢æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

1. æ‰“å¼€æ¨¡å‹ç®¡ç†é¡µé¢ï¼ˆç‚¹å‡»å·¦ä¾§è¾¹æ çš„æ¨¡å‹ç®¡ç†å›¾æ ‡ï¼‰
2. å¡«å†™æ¨¡å‹é…ç½®ä¿¡æ¯
3. ä¿å­˜å³å¯ç«‹å³ä½¿ç”¨

æ”¯æŒçš„ API ç±»å‹ï¼š
- **Google Gemini** - ä½¿ç”¨ Google GenAI SDK
- **OpenAI å…¼å®¹** - ä½¿ç”¨ OpenAI SDK æˆ–å…¼å®¹æ¥å£ï¼ˆæ”¯æŒç³»ç»Ÿæç¤ºè¯ï¼‰
- **HTTP + SSE** - é€šç”¨ HTTP æµå¼æ¥å£
- **Spark ç‰¹æ®Šæ ¼å¼** - è®¯é£æ˜Ÿç« API æ ¼å¼

### å¼€å‘æ–°çš„ API ç±»å‹

å¦‚æœéœ€è¦æ·»åŠ ä¸æ”¯æŒçš„ API ç±»å‹ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼š

1. **åœ¨ `llm_wrapper.py` ä¸­å®ç°æ–°çš„èŠå¤©æ–¹æ³•**ï¼š
   ```python
   def _chat_new_type(self, config, messages):
       """å®ç°æ–°çš„ API ç±»å‹èŠå¤©é€»è¾‘"""
       # é…ç½® API å‚æ•°
       # å‘é€è¯·æ±‚
       # æµå¼è¿”å›å“åº”
       for chunk in ...:
           yield chunk
   ```

2. **åœ¨ `chat_stream()` ä¸­æ·»åŠ è·¯ç”±**ï¼š
   ```python
   elif config["type"] == "new_type":
       yield from self._chat_new_type(config, messages)
   ```

3. **åœ¨ `models.json.example` çš„ `api_types` ä¸­æ·»åŠ ç±»å‹å®šä¹‰**ï¼š
   ```json
   "new_type": {
       "name": "æ–° API ç±»å‹",
       "description": "ç±»å‹æè¿°",
       "requires": ["api_key", "model"],
       "optional": ["base_url"],
       "supports_system_prompt": false,
       "supports_history": true
   }
   ```

4. **åœ¨ `model_manager.html` ä¸­æ·»åŠ å¯¹åº”çš„è¡¨å•å­—æ®µ**ï¼ˆå¦‚æœéœ€è¦ç‰¹æ®Šå­—æ®µï¼‰

### è¿è¡Œæµ‹è¯•

é¡¹ç›®åŒ…å« 36 ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ ¸å¿ƒåŠŸèƒ½å’Œ API ç«¯ç‚¹ï¼š

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# macOS / Linux
source venv/bin/activate

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=web_chat --cov-report=html --cov-report=term-missing

# è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•
pytest -m unit          # ä»…è¿è¡Œå•å…ƒæµ‹è¯•
pytest -m integration   # ä»…è¿è¡Œé›†æˆæµ‹è¯•

# æŸ¥çœ‹è¯¦ç»†è¾“å‡º
pytest -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest web_chat/tests/test_app.py
pytest web_chat/tests/test_llm_wrapper.py
```

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… LLMWrapper å•å…ƒæµ‹è¯•ï¼ˆ15 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… Flask API é›†æˆæµ‹è¯•ï¼ˆ16 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… Model Manager æµ‹è¯•ï¼ˆ25 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… é…ç½®ç®¡ç†æµ‹è¯•ï¼ˆ5 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… æ€»è¦†ç›–ç‡ï¼š**90.89%**ï¼ˆç›®æ ‡ 60%ï¼‰

### CI/CD è‡ªåŠ¨åŒ–

é¡¹ç›®ä½¿ç”¨ GitHub Actions è¿›è¡ŒæŒç»­é›†æˆï¼š

- âœ… è‡ªåŠ¨è¿è¡Œæµ‹è¯•å¥—ä»¶
- âœ… å¤š Python ç‰ˆæœ¬æµ‹è¯•ï¼ˆ3.11, 3.12ï¼‰
- âœ… ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
- âœ… ç±»å‹æ£€æŸ¥ï¼ˆmypyï¼‰
- âœ… å®‰å…¨æ‰«æï¼ˆbanditï¼‰

---

## å¸¸è§é—®é¢˜

### â“ å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹ï¼Ÿ

**ç­”**: é€šè¿‡å‰ç«¯æ¨¡å‹ç®¡ç†ç•Œé¢æ·»åŠ ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

1. ç‚¹å‡»å·¦ä¾§è¾¹æ çš„æ¨¡å‹ç®¡ç†å›¾æ ‡ï¼ˆğŸ“‹ï¼‰
2. ç‚¹å‡»"æ·»åŠ æ–°æ¨¡å‹"æŒ‰é’®
3. å¡«å†™æ¨¡å‹é…ç½®ä¿¡æ¯
4. ä¿å­˜å³å¯ä½¿ç”¨

### â“ æ·»åŠ çš„æ¨¡å‹ä¼šä¸¢å¤±å—ï¼Ÿ

**ç­”**: ä¸ä¼šã€‚è‡ªå®šä¹‰æ¨¡å‹ä¿å­˜åœ¨æœ¬åœ° `models.json` æ–‡ä»¶ä¸­ï¼Œä¼šæŒä¹…åŒ–ä¿å­˜ã€‚ä½†æ³¨æ„ï¼š
- è¯¥æ–‡ä»¶å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ° Git
- å¦‚æœæ›´æ¢è®¾å¤‡æˆ–é‡æ–°å…‹éš†ä»“åº“ï¼Œéœ€è¦é‡æ–°æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹
- å»ºè®®å®šæœŸå¤‡ä»½ `models.json` æ–‡ä»¶

### â“ å¦‚ä½•æ¢å¤åˆå§‹æ¨¡å‹é…ç½®ï¼Ÿ

**ç­”**: åˆ é™¤ `web_chat/models.json` æ–‡ä»¶ï¼Œé‡å¯åº”ç”¨åä¼šè‡ªåŠ¨ä» `models.json.example` æ¢å¤åˆå§‹é…ç½®ã€‚

### â“ å¯ä»¥åˆ é™¤å†…ç½®æ¨¡å‹å—ï¼Ÿ

**ç­”**: ä¸å¯ä»¥ã€‚å†…ç½®æ¨¡å‹ï¼ˆGoogle Geminiã€DeepSeekã€Moonshotã€Qwenã€Sparkï¼‰å—ä¿æŠ¤ï¼Œæ— æ³•é€šè¿‡ç•Œé¢åˆ é™¤ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨æŸä¸ªå†…ç½®æ¨¡å‹ï¼Œå¯ä»¥åœ¨ API å¯†é’¥é…ç½®ä¸­ä¸å¡«å†™å¯¹åº”çš„å¯†é’¥ã€‚

### â“ ä¸ºä»€ä¹ˆ Spark æ¨¡å‹æ²¡æœ‰å¯¹è¯å†å²ï¼Ÿ

**ç­”**: Spark API çš„é™åˆ¶å¯¼è‡´å®ƒä¸æ”¯æŒä¸Šä¸‹æ–‡è®°å¿†ã€‚æ¯æ¬¡è¯·æ±‚ä»…å‘é€å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼Œä¸ä¼ é€’å†å²è®°å½•ã€‚è¿™æ˜¯ Spark API çš„è®¾è®¡é™åˆ¶ï¼Œä¸æ˜¯é¡¹ç›®çš„é—®é¢˜ã€‚

### â“ å¦‚ä½•ä¸­æ–­ AI è¾“å‡ºï¼Ÿ

**ç­”**: AI ç”Ÿæˆæ—¶ï¼Œå‘é€æŒ‰é’®ä¼šè‡ªåŠ¨å˜ä¸ºä¸­æ–­æŒ‰é’®ï¼ˆâ¬›ï¼‰ã€‚ç‚¹å‡»ä¸­æ–­æŒ‰é’®å³å¯åœæ­¢ AI ç”Ÿæˆï¼Œå·²ç”Ÿæˆçš„éƒ¨åˆ†å†…å®¹ä¼šè‡ªåŠ¨ä¿å­˜å¹¶æ˜¾ç¤º `[å·²ä¸­æ–­]` æ ‡è®°ã€‚

### â“ æµå¼å“åº”ä¸­æ–­æ€ä¹ˆåŠï¼Ÿ

**ç­”**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§
2. ç¡®è®¤ API å¯†é’¥æ˜¯å¦æœ‰æ•ˆ
3. æ£€æŸ¥ API é€Ÿç‡é™åˆ¶ï¼ˆæ¯ä¸ªæä¾›å•†éƒ½æœ‰é€Ÿç‡é™åˆ¶ï¼‰
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### â“ å¦‚ä½•è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼Ÿ

**ç­”**: åœ¨ `llm_wrapper.py` çš„æ¨¡å‹é…ç½®ä¸­æ·»åŠ  `system` å­—æ®µï¼š

```python
"deepseek": {
    "type": "openai",
    "api_key": custom_api_keys.get("DEEPSEEK_API_KEY", "") if custom_api_keys else "",
    "base_url": "https://api.deepseek.com/v1",
    "model": "deepseek-chat",
    "system": "You are a helpful assistant"  # è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯
}
```

> **æ³¨æ„**: ä»… OpenAI å…¼å®¹çš„æä¾›å•†ï¼ˆDeepSeekã€Moonshotï¼‰æ”¯æŒç³»ç»Ÿæç¤ºè¯ã€‚

### â“ API å¯†é’¥å®‰å…¨å—ï¼Ÿ

**ç­”**: é¡¹ç›®é‡‡ç”¨å¤šå±‚å®‰å…¨ä¿æŠ¤æœºåˆ¶ï¼š

**API å¯†é’¥ä¿æŠ¤**ï¼š
- âœ… API å¯†é’¥é€šè¿‡å‰ç«¯ç•Œé¢é…ç½®ï¼Œå­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ `web_chat/api_keys.json`
- âœ… `api_keys.json` å·²è¢« `.gitignore` å¿½ç•¥ï¼Œä¸ä¼šè¢«æäº¤åˆ° Git ä»“åº“
- âœ… é…ç½®æ–‡ä»¶ä»…å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°ï¼Œä¸ä¸ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡å…±äº«
- âœ… æ”¯æŒæ˜¾ç¤º/éšè—å¯†é’¥ï¼Œé˜²æ­¢æ„å¤–æ³„éœ²

**è‡ªå®šä¹‰æ¨¡å‹ä¿æŠ¤**ï¼š
- âœ… ç”¨æˆ·è‡ªå®šä¹‰æ¨¡å‹é…ç½®ä¿å­˜åœ¨ `web_chat/models.json`
- âœ… `models.json` å·²è¢« `.gitignore` å¿½ç•¥ï¼Œä¸ä¼šè¢«æäº¤åˆ° Git ä»“åº“
- âœ… å†…ç½®æ¨¡å‹é…ç½®å•ç‹¬ä¿å­˜åœ¨ `models.json.example`ï¼ˆå¯å®‰å…¨æäº¤ï¼‰
- âœ… é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ä»ç¤ºä¾‹æ–‡ä»¶å¤åˆ¶ï¼Œç¡®ä¿ç”¨æˆ·æœ‰é»˜è®¤é…ç½®

### â“ é¡¹ç›®æœ‰å“ªäº›å®‰å…¨æªæ–½ï¼Ÿ

**ç­”**: é¡¹ç›®å®æ–½äº†å®Œæ•´çš„å®‰å…¨é˜²æŠ¤ä½“ç³»ï¼š

**åç«¯å®‰å…¨**ï¼š
- âœ… **CSRF ä¿æŠ¤** - ä½¿ç”¨ Flask-WTF é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»
- âœ… **è¾“å…¥éªŒè¯** - å®Œæ•´çš„è¯·æ±‚å‚æ•°éªŒè¯ï¼ˆç±»å‹ã€é•¿åº¦ã€æ ¼å¼ã€èŒƒå›´ï¼‰
- âœ… **å¼‚å¸¸å¤„ç†** - å…·ä½“çš„å¼‚å¸¸æ•è·ï¼Œé¿å…ä¿¡æ¯æ³„éœ²
- âœ… **æ—¥å¿—è®°å½•** - ç»“æ„åŒ–æ—¥å¿—ï¼Œä¾¿äºå®‰å…¨å®¡è®¡
- âœ… **ç¯å¢ƒå˜é‡** - æ•æ„Ÿé…ç½®é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œä¸ç¡¬ç¼–ç 
- âœ… **Debug æ¨¡å¼** - é»˜è®¤å…³é—­ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶

**å‰ç«¯å®‰å…¨**ï¼š
- âœ… **XSS é˜²æŠ¤** - DOMPurify æ¸…ç†æ‰€æœ‰ç”¨æˆ·è¾“å…¥çš„ HTML å†…å®¹
- âœ… **HTML è½¬ä¹‰** - é”™è¯¯æ¶ˆæ¯ç­‰åŠ¨æ€å†…å®¹è¿›è¡Œ HTML è½¬ä¹‰
- âœ… **å†…å®¹å®‰å…¨** - Markdown æ¸²æŸ“å‰è¿›è¡Œæ¸…ç†ï¼Œé˜²æ­¢æ¶æ„è„šæœ¬æ³¨å…¥

**ä»£ç è´¨é‡**ï¼š
- âœ… **ç±»å‹æ³¨è§£** - å®Œæ•´çš„ç±»å‹æç¤ºï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•** - 36 ä¸ªæµ‹è¯•ç”¨ä¾‹ç¡®ä¿ä»£ç æ­£ç¡®æ€§
- âœ… **å®‰å…¨æ‰«æ** - é›†æˆ bandit è¿›è¡Œå®‰å…¨æ¼æ´æ‰«æ
- âœ… **ç±»å‹æ£€æŸ¥** - ä½¿ç”¨ mypy è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. ğŸ› **æŠ¥å‘Šé—®é¢˜** - åœ¨ Issues ä¸­æŠ¥å‘Š Bug
2. ğŸ’¡ **åŠŸèƒ½å»ºè®®** - æå‡ºæ–°åŠŸèƒ½æˆ–æ”¹è¿›å»ºè®®
3. ğŸ”§ **æäº¤ä»£ç ** - æäº¤ Pull Request
4. ğŸ“– **æ”¹è¿›æ–‡æ¡£** - å®Œå–„é¡¹ç›®æ–‡æ¡£

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- **Python**: éµå¾ª [PEP 8](https://pep8.org/) é£æ ¼æŒ‡å—
- **JavaScript**: ä½¿ç”¨ ES6+ è¯­æ³•
- **æ³¨é‡Š**: å…³é”®ä»£ç éœ€è¦æ·»åŠ æ³¨é‡Šè¯´æ˜
- **æäº¤ä¿¡æ¯**: ä½¿ç”¨æ¸…æ™°çš„æäº¤æ¶ˆæ¯

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

```
MIT License

Copyright (c) 2024 AI NEXUS

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [Flask](https://flask.palletsprojects.com/) - Python Web æ¡†æ¶
- [OpenAI Python SDK](https://github.com/openai/openai-python) - OpenAI API å®¢æˆ·ç«¯
- [Google GenAI SDK](https://github.com/googleapis/python-genai) - Google Gemini SDK
- [TailwindCSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Marked.js](https://marked.js.org/) - Markdown è§£æå™¨

---

## è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: [https://github.com/qinyre/AI-Chat](https://github.com/qinyre/AI-Chat)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/qinyre/AI-Chat/issues)
- **é‚®ç®±**: qinyre801014@gmail.com

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by AI NEXUS Team

</div>
